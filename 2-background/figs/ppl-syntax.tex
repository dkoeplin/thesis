\begin{figure*}
\centering

%%%%%%%%% ----- Map ------- %%%%%
\newsavebox{\Map}
\begin{lrbox}{\Map}
\begin{lstlisting}[language=PPLTable]
Map(d){m}: V$^D$
\end{lstlisting}
\end{lrbox}

%%%%%%%%% ----- MultiFold ------- %%%%%
\newsavebox{\MultiFold}
\begin{lrbox}{\MultiFold}
\begin{lstlisting}[language=PPLTable]
MultiFold(d)(r)(z){f}{c}: V$^R$
\end{lstlisting}
\end{lrbox}

%%%%%%%%% ----- FlatMap ------- %%%%%
\newsavebox{\FlatMap}
\begin{lrbox}{\FlatMap}
\begin{lstlisting}[language=PPLTable]
FlatMap(d){n}: V$^1$
\end{lstlisting}
\end{lrbox}



%%%%%%%%% ----- GroupByFold ------- %%%%%
\newsavebox{\GroupByFold}
\begin{lrbox}{\GroupByFold}
\begin{lstlisting}[language=PPLTable]
GroupByFold(d)(z){g}{c}: (K,V)$^1$
\end{lstlisting}
\end{lrbox}


\fontsize{9}{10}
\selectfont
\begin{tabular}{l}
\multicolumn{1}{l}{\bf{(a) Multi-Dimensional Patterns}} \\ \midrule
\multirow{1}{*}{\usebox{\Map}} \\
\vspace{-7pt} \\
Mapping over a $D$-dimensional domain. \\
\vspace{-8pt} \\
{
\begin{tabular}{lll}
\argg{d}: &\hspace{-10pt} $\mathbb{Z}^D$  & \hspace{-4pt}$D$-dimensional iteration domain. \\
\argg{m}: &\hspace{-10pt} $\mathbb{Z}_D\rightarrow V$ & \hspace{-4pt}Value function.   \\
\end{tabular}
}
\\
\\
\multirow{1}{*}{\usebox{\MultiFold}} \\
\vspace{-7pt} \\
Combination of $R$-dimensional tensors over a $D$-dimensional iteration domain. \\
\vspace{-8pt} \\
{
\begin{tabular}{lll}
\argg{d}: &\hspace{-10pt} $\mathbb{Z}^D$ & \hspace{-4pt}$D$-dimensional iteration domain.  \\
\argg{r}: &\hspace{-10pt} $\mathbb{Z}^R$ & \hspace{-4pt}Output index range.         \\
\argg{z}: &\hspace{-10pt} $V^R$          & \hspace{-4pt}Initial accumulator         \\
\argg{f}: &\hspace{-10pt} $\mathbb{Z}_D \rightarrow (\mathbb{Z}_R, V^R \rightarrow V^R)$ & \hspace{-4pt}(Offset, Value) function.    \\
\argg{c}: &\hspace{-10pt} $(V^R, V^R) \rightarrow V^R$& \hspace{-4pt}Combine function.  \\
\end{tabular}
}
\\
\\
\\
\multicolumn{1}{l}{\bf{(b) One Dimensional Patterns}} \\ \midrule
\multirow{1}{*}{\usebox{\FlatMap}} \\
\vspace{-7pt} \\
Concatenation of 1-dimensional arrays over a 1-dimensional iteration domain. \\
\vspace{-8pt} \\
{
\begin{tabular}{lll}
\argg{d}:&\hspace{-10pt} $\mathbb{Z}^1$ & \hspace{-4pt}1-dimensional iteration domain.  \\
\argg{n}:&\hspace{-10pt} $\mathbb{Z} \rightarrow V^1$ & \hspace{-4pt}Multi-value function. \\
\end{tabular}
}
\\
\\
\multirow{1}{*}{\usebox{\GroupByFold}} \\
\vspace{-7pt} \\
Associative reduction of values over a 1-dimensional domain based on paired key values. \\
\vspace{-8pt} \\
{
\begin{tabular}{lll}
\argg{d}: &\hspace{-10pt} $\mathbb{Z}^1$ & \hspace{-4pt}1-dimensional iteration domain. \\
\argg{z}: &\hspace{-10pt} $V$            & \hspace{-4pt}Identity value. \\
\argg{g}: &\hspace{-10pt} $\mathbb{Z} \rightarrow (K,V)$ & \hspace{-4pt}(Key,Value) function.  \\
\argg{c}: &\hspace{-10pt} $(V,V) \rightarrow V$  & \hspace{-4pt}Combination function. \\
\end{tabular}
} \\
\end{tabular}

\caption{\label{fig:ppl-syntax}Definition of the patterns in the parallel pattern language (PPL). $V^D$ denotes a tensor with $D$ dimensions and elements of type $V$, while $V_D$ denotes a tuple of $D$ elements of type $V$. Parentheses are used to denote simple value parameters while brackets denote functions.}
\end{figure*}
